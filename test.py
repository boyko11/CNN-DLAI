
import numpy as np


def convolve(img, filter):

    img_rows = img.shape[0]
    img_cols = img.shape[1]
    filter_rows = filter.shape[0]
    filter_cols = filter.shape[1]

    convolved_img = []
    for row in range(img_rows - filter_rows + 1):
        convolved_row = []
        for column in range(img_cols - filter_cols + 1):
            conv_result = np.sum(img[row:row+filter_rows, column:column+filter_cols] * filter)
            convolved_row.append(conv_result)
        convolved_img.append(convolved_row)

    convolved_img = np.array(convolved_img)

    return convolved_img

def run_it():

    img = np.array([
        [255, 255, 255, 255, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255,  0,  0, 0, 0, 0, 0, 0],
        [255,  0,  0,  0, 0, 0, 0, 0, 0],
        [0,   0,  0,  0, 0, 0, 0, 0, 0],
        [0,   0,  0,  0, 0, 0, 0, 0, 0]
    ])

    img_large = np.array([
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255,  0,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255,  0,  0,  0,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255,  0,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255,  0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,  0,  0,  0,  0,  0,  0, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
    ])


    img_h_edge = np.array([
        [255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255],
        [255, 255, 255, 255, 255, 255, 255, 255, 255],
        [ 0,  0,  0,  0, 0, 0, 0, 0, 0],
        [0,   0,  0,  0, 0, 0, 0, 0, 0],
        [0,   0,  0,  0, 0, 0, 0, 0, 0],
    ])

    img_v_edge = np.array([
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
        [255, 255, 255,  0, 0, 0, 0, 0, 0],
    ])

    filter = np.array([
        [0, 1, -1, 0],
        [1, 3, -3, 0],
        [1, 3, -3, 1],
        [0, 1, -1, 0],
    ]
    )

    conv1 = convolve(img, filter)
    print(img)
    print(conv1)
    print('----------------')

    img_rot_90 = np.rot90(img)

    img_rot_180 = np.rot90(img_rot_90)
    conv3 = convolve(img_rot_180, filter)
    print(img_rot_180)
    print(conv3)
    print('----------------')


    conv_h = convolve(img_h_edge, filter)
    print(img_h_edge)
    print(conv_h)
    print('----------------')

    conv_v = convolve(img_v_edge, filter)
    print(img_v_edge)
    print(conv_v)
    print('----------------')

    np.set_printoptions(linewidth=np.inf)
    conv_large = convolve(img_large, filter)
    print(img_large)
    print(conv_large)
    print('----------------')

if __name__ == '__main__':
    run_it()

